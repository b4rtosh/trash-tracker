{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Create or Update Route</title>
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
  <link rel="stylesheet" href="{% static 'css/global.css' %}"/>
  <link rel="stylesheet" href="{% static 'css/styleguide.css' %}"/>
</head>
<body>
  <div class="landing-page">
    <div class="div">

      <!-- Top Navigation -->
      <div class="navigation">
        <div class="overlap-3">
<a href="{% url 'routes:index' %}" class="navigation-link">
    <div class="text-wrapper-11">TrashTracker</div>
    <div class="overlap-group-2">
        <img src="{% static 'img/logo-1.png' %}" alt="Logo">
    </div>
</a>
          </div>


      </div>

      <!-- Hero + Footer -->
      <div class="overlap-group">
        <div class="navigation-footer">
          <!-- footer contents -->
        </div>
        <div class="hero-image"></div>
      </div>
<!-- Route Name Form -->
<div class="frame" style="top: 320px; padding: 20px; border-radius: 12px; display: flex; flex-direction: column; height: 320px; background: white;">
  <div style="flex-grow: 1; display: flex; flex-direction: column;">
    <div class="text-wrapper-10" style="margin-bottom: 10px;">Please input the route name:</div>
    <form method="post" style="flex-grow: 1; display: flex; flex-direction: column;">
      {% csrf_token %}
      <input
        type="text"
        name="route_name"
        placeholder="Route name"
        value="{{ route.name }}"
        class="route-name-input"
        style="width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 6px;"
      />
      <input
        type="text"
        name="latitude"
        placeholder="Latitude"
        class="coordinate-input"
        style="width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 6px;"
      />
      <input
        type="text"
        name="longitude"
        placeholder="Longitude"
        class="coordinate-input"
        style="width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 6px;"
      />
<button type="submit" class="button" style="margin-top: 200px; margin-left: 200px; margin-bottom: 10px;">Save Route</button>
    </form>
  </div>

  <!-- Add Point button pinned to the bottom of the frame -->
<button type="button" class="button" style="margin-top: 200px;">Add Point</button>
</div>





      <!-- Map and Table Section -->
      <div class="cards" style="top: 600px;">
        <!-- Map Display -->
    <div class="customer-quote">
      <div class="folium-map-container">
          <div id="map" style="height: 500px;"></div>
{{ folium_map|safe }}
      </div>
    </div>

        <!-- Route Points Table -->
        <div class="customer-quote">
          <h3 style="color: white;">Designated Spots</h3>
          <table class="route-points-table" style="width: 100%; color: white; border-collapse: collapse;">
            <thead>
              <tr style="border-bottom: 1px solid #444;">
                <th>Address</th>
                <th>Latitude</th>
                <th>Longitude</th>
              </tr>
            </thead>
            <tbody>
  {% for point in route.points %}
    <tr>
      <td>{{ point.address }}</td>
      <td>{{ point.lat }}</td>
      <td>{{ point.lon }}</td>
      <!-- Add delete button for each row -->
      <td>
        <form method="POST" action="{% url 'delete_point' point.id %}">
          {% csrf_token %}
          <button type="submit" class="button" style="background-color: red; color: white;">Delete</button>
        </form>
      </td>
    </tr>
  {% empty %}
    <tr>
      <td colspan="4">No points added yet.</td>
    </tr>
  {% endfor %}
</tbody>

          </table>
        </div>
      </div>

      <!-- Page Info -->
      <div class="copy">
        <div class="page-title">
          <p class="p">Map your trash!</p>
          <p class="text-wrapper-9">Input your designated spots and have your route calculated and returned!</p>
        </div>
      </div>

    </div>
  </div>
</div>
</body>
</html>
